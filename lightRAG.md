# LightRAG
LightRAG 是一种基于 GraphRAG 结合了知识图谱（Knowledge Graphs）和基于嵌入的检索系统的创新方法. 

## lightRAG 工作流
1. 上传文档
2. 文档向量化
3. 查询
4. LightRAG LLM 响应
5. 知识图谱

## LightRAG 架构
差一张LightRAG的架构图
### 图形化文本索引（Graph-Based Text Indexing）
通过识别实体（如名称、日期、地点和事件）及其关系来构建一个总体的知识图谱。
1. 使用 LLM（大型语言模型）从文档中提取实体和关系。Extracting Entities and Relationships, R(.)
2. 用于键值对生成的LLM分析 LLM Profiling for Key Value Pair Generation P(.)
3. 去重优化图结构 Deduplication to Optimize Graph Operation D(.) 

### 双层检索范式（Dual-Level Retrieval Paradigm）
目的：通过识别知识图谱中的低层和高层键，回答多样化的查询。(这一段我其实有点不太理解,作者说的很空,我理解是E的索引和R的索引)
实现：
    低层检索：针对特定、详细的信息，处理局部查询。
    高层检索：聚合多个实体的信息，回答需要更广泛主题或抽象的全局查询。

## LightRAG 如何利用知识图谱？
对于给定的查询，LightRAG 的检索算法提取局部关键词 klocal​ 和全局查询关键词 kglobal​。然后，利用向量相似性，将相关实体与局部查询的低层键以及全局查询关键词与高层概念相匹配。
通过收集局部子图中的一跳邻接节点，LightRAG 整合了额外的上下文层，通过图索引中的边提高了结果的相关性。这种双层检索结构结合了关键词匹配和从构建的知识图谱中导出的相关结构信息。
实现：

    查询关键词提取：
        首先，LightRAG 需要从用户的查询中提取关键词。这些关键词分为两类：局部关键词（针对特定信息的查询）和全局关键词（针对更广泛主题或抽象概念的查询）。
    向量相似性匹配：
        使用向量相似性搜索，LightRAG 将查询关键词与知识图谱中的实体进行匹配。这涉及到计算查询向量与知识图谱中实体向量之间的相似度。
    双层检索：
        低层检索：针对局部关键词，检索与单个节点和边相关的具体信息。这涉及到从知识图谱中找到与局部关键词最相关的实体和关系。
        高层检索：针对全局关键词，检索跨多个实体和文档的聚合信息。这涉及到从知识图谱中找到与全局关键词相关的更广泛的主题或概念。
    上下文整合：
        LightRAG 通过收集局部子图中的一跳邻接节点来增加额外的上下文层。这意味着，对于每个检索到的实体，LightRAG 还会检索与其直接相连的其他实体（即一跳邻接节点），以提供更丰富的上下文信息。
    结果优化：
        通过图索引中的边，LightRAG 能够提高检索结果的相关性。这是因为边代表了实体之间的关系，有助于理解实体的上下文和它们之间的相互作用。
    结合结构信息：

## LightRAG 文档向量化流程 (构建数据库)

## LightRAG 检索查询流程 (用户查询使用上一步构建的数据库)

ref1:[](https://learnopencv.com/lightrag/)
ref2:[arvix](https://arxiv.org/pdf/2410.05779)
ref3: